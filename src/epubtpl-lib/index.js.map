{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";AAAA;;GAEG;;AAEH,6CAA4C;AAC5C,iDAAkE;AAElE,SAAgB,UAAU,CAAC,OAAO,EAAE,cAAwB;IAE3D,IAAI,cAAc,IAAI,OAAO,2BAAa,KAAK,WAAW,EAC1D;QACC,OAAO,OAAO,CAAC;KACf;IAED,OAAO,UAAU,CAAC,OAAO,CAAC;QACzB,gEAAgE;SAC/D,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAC3B;AACF,CAAC;AAXD,gCAWC;AAED,SAAgB,UAAU,CAAC,IAAY,EAAE,UAA0B,EAAE;IAEpE,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC;QACvB,kBAAkB,EAAE,IAAI;QACxB,kBAAkB,EAAE,IAAI;QACxB,oBAAoB,EAAE,IAAI;QAC1B,aAAa,EAAE,IAAI;QACnB,gBAAgB,EAAE,IAAI;QAEtB,qBAAqB,EAAE;YACtB,mBAAmB;SACnB;KACD,EAAE,OAAO,CAAC,CAAC;IAEZ,IACA;QACC,IAAI,GAAG,GAAG,sBAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;QAEhC,OAAO,GAAG,CAAC;KACX;IACD,OAAO,CAAC,EACR;QACC,IACA;YACC,IAAI,GAAG,GAAG,2BAAa,CAAC,IAAI,EAAE;gBAC7B,gBAAgB,EAAE,IAAI;gBACtB,WAAW,EAAE,EAAE;gBACf,iBAAiB,EAAE,KAAK;gBACxB,WAAW,EAAE,CAAC;gBACd,YAAY,EAAE,CAAC;gBACf,qBAAqB,EAAE,CAAC;gBACxB,iBAAiB,EAAE,IAAI;gBACvB,gBAAgB,EAAE,CAAC;gBACnB,WAAW,EAAE,EAAE;gBACf,0BAA0B,EAAE,KAAK;gBACjC,qBAAqB,EAAE,IAAI;aAC3B,CAAC,CAAC;YAEH,OAAO,GAAG,CAAC;SACX;QACD,OAAO,CAAC,EACR;YACC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SACjB;KACD;IAED,OAAO,IAAI,CAAC;AACb,CAAC;AA/CD,gCA+CC;AAED,gCAAgC;AAChC,kBAAe,IAAI,CAAC","sourcesContent":["/**\n * Created by user on 2017/12/15/015.\n */\n\nimport { html_beautify } from 'js-beautify';\nimport { minify, Options as IMinifyOptions } from 'html-minifier';\n\nexport function formatHTML(htmlstr, skipFormatting?: boolean): string\n{\n\tif (skipFormatting || typeof html_beautify === 'undefined')\n\t{\n\t\treturn htmlstr;\n\t}\n\n\treturn htmlminify(htmlstr)\n\t\t//.replace(/<item id=\"\" href=\"image\\/\" media-type=\"\" \\/>/ig, '')\n\t\t.replace(/^\\n+|\\n+$/, '\\n')\n\t;\n}\n\nexport function htmlminify(html: string, options: IMinifyOptions = {})\n{\n\toptions = Object.assign({\n\t\tcollapseWhitespace: true,\n\t\tpreserveLineBreaks: true,\n\t\tconservativeCollapse: true,\n\t\tcaseSensitive: true,\n\t\tkeepClosingSlash: true,\n\n\t\tignoreCustomFragments: [\n\t\t\t/\\<\\/[ \\t]*meta\\>/i,\n\t\t],\n\t}, options);\n\n\ttry\n\t{\n\t\tlet ret = minify(html, options);\n\n\t\treturn ret;\n\t}\n\tcatch (e)\n\t{\n\t\ttry\n\t\t{\n\t\t\tlet ret = html_beautify(html, {\n\t\t\t\tend_with_newline: true,\n\t\t\t\tindent_char: '',\n\t\t\t\tindent_inner_html: false,\n\t\t\t\tindent_size: 0,\n\t\t\t\tindent_level: 0,\n\t\t\t\tmax_preserve_newlines: 1,\n\t\t\t\tpreserve_newlines: true,\n\t\t\t\twrap_line_length: 0,\n\t\t\t\tunformatted: [],\n\t\t\t\tselector_separator_newline: false,\n\t\t\t\tnewline_between_rules: true\n\t\t\t});\n\n\t\t\treturn ret;\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n\n\treturn html;\n}\n\nimport * as self from './index';\nexport default self;\n"]}