{"version":3,"file":"handlebar-helpers.js","sourceRoot":"","sources":["handlebar-helpers.ts"],"names":[],"mappings":";;AAAA,2CAAoC;AAqD3B,qBArDF,oBAAU,CAqDE;AApDnB,aAAa;AACb,6BAA6B;AAC7B,aAAa;AACb,yBAAyB;AAEzB,wBAAiC;AAEpB,QAAA,SAAS,GAAG;IACxB,MAAM,EAAE,YAAY;IACpB,KAAK,EAAE,YAAY;IACnB,KAAK,EAAE,WAAW;IAClB,KAAK,EAAE,WAAW;IAClB,KAAK,EAAE,eAAe;IACtB,KAAK,EAAE,WAAW;IAClB,KAAK,EAAE,6BAA6B;IACpC,KAAK,EAAE,UAAU;CACjB,CAAC;AAEF,oBAAU,CAAC,cAAc,CAAC,WAAW,EAAE,UAAU,GAAG;IAEnD,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,CAAC,CAAC,CAAC;AAEH,oBAAU,CAAC,cAAc,CAAC,UAAU,EAAE,UAAU,GAAG;IAElD,OAAO,iBAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5B,CAAC,CAAC,CAAC;AAEH,oBAAU,CAAC,cAAc,CAAC,QAAQ,EAAE,UAAU,QAAQ,EAAE,OAAO;IAE9D,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;IAEpC,IAAI,MAAM,GAAG,EAAE,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAC;IAElD,OAAO,IAAI,oBAAU,CAAC,UAAU,CAAC,oBAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACnF,CAAC,CAAC,CAAC;AAEH,SAAS,GAAG,CAAC,GAAG;IAEf,IAAI,GAAG,KAAK,SAAS,EACrB;QACC,OAAO,GAAG,CAAC;KACX;IAED,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AAC7C,CAAC;AAED,SAAgB,UAAU,CAAC,QAAQ,EAAE,OAAO,EAAE,cAAwB;IAErE,OAAO,UAAU,CAAC,UAAU,CAAC,oBAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,EAAE,cAAc,CAAC,CAAC;AACrF,CAAC;AAHD,gCAGC;AAID,kBAAe,oBAAU,CAAC","sourcesContent":["import Handlebars from 'handlebars';\r\n// @ts-ignore\r\nimport * as path from 'path';\r\n// @ts-ignore\r\nimport * as fs from 'fs';\r\n\r\nimport epubTplLib, {  } from '.';\r\n\r\nexport const mimetypes = {\r\n\t'jpeg': 'image/jpeg',\r\n\t'jpg': 'image/jpeg',\r\n\t'bmp': 'image/bmp',\r\n\t'png': 'image/png',\r\n\t'svg': 'image/svg+xml',\r\n\t'gif': 'image/gif',\r\n\t'ttf': 'application/x-font-truetype',\r\n\t'css': 'text/css',\r\n};\r\n\r\nHandlebars.registerHelper('extension', function (str)\r\n{\r\n\treturn ext(str);\r\n});\r\n\r\nHandlebars.registerHelper('mimetype', function (str)\r\n{\r\n\treturn mimetypes[ext(str)];\r\n});\r\n\r\nHandlebars.registerHelper('import', function (filePath, options)\r\n{\r\n\tfilePath = path.normalize(filePath);\r\n\r\n\tlet source = fs.readFileSync(filePath).toString();\r\n\r\n\treturn new Handlebars.SafeString(Handlebars.compile(source)(Object.create(this)));\r\n});\r\n\r\nfunction ext(str)\r\n{\r\n\tif (str === undefined)\r\n\t{\r\n\t\treturn str;\r\n\t}\r\n\r\n\treturn str.substr(str.lastIndexOf('.') + 1);\r\n}\r\n\r\nexport function compileTpl(template, content, skipFormatting?: boolean): string\r\n{\r\n\treturn epubTplLib.formatHTML(Handlebars.compile(template)(content), skipFormatting);\r\n}\r\n\r\nexport { Handlebars };\r\n\r\nexport default Handlebars;\r\n"]}