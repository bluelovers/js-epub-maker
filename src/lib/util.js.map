{"version":3,"file":"util.js","sourceRoot":"","sources":["util.ts"],"names":[],"mappings":";AAAA;;GAEG;;AAEH,+CAAuC;AAa9B,kBAbA,sBAAO,CAaA;AAZhB,mDAAsC;AAEtC,2DAAkD;AAQzC,uBARA,iCAAY,CAQA;AANrB,mCAAoC;AAKlB,0BAAO;AAJzB,oCAAqC;AAI5B,0BAAO;AAHhB,iCAAkC;AAKzB,wBAAM;AAJf,qCAAsC;AAO7B,4BAAQ;AAEjB,SAAgB,WAAW,CAAiE,IAAO;IAElG,IAAI,IAAI,CAAC,WAAW,EACpB;QACC,IAAI,CAAC,WAAW,GAAG,qBAAI,CAAC,IAAI,CAAC,WAAW,CAAC;aACvC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;aACzB,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAC9B;QAED,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;KACxF;IAED,OAAO,IAAI,CAAC;AACb,CAAC;AAbD,kCAaC","sourcesContent":["/**\n * Created by user on 2018/9/24/024.\n */\n\nimport { console } from 'debug-color2';\nimport { crlf } from 'crlf-normalize';\nimport { IEpubConfig } from '../config';\nimport { array_unique } from 'array-hyper-unique';\n\nimport shortid = require('shortid');\nimport hashSum = require('hash-sum');\nimport moment = require('moment');\nimport BPromise = require('bluebird');\n\nexport { hashSum, shortid }\nexport { array_unique }\nexport { moment }\nexport { console }\n\nexport { BPromise }\n\nexport function htmlPreface<T extends Pick<IEpubConfig, 'infoPreface' | 'infoPrefaceHTML'>>(conf: T): T & Pick<IEpubConfig, 'infoPreface' | 'infoPrefaceHTML'>\n{\n\tif (conf.infoPreface)\n\t{\n\t\tconf.infoPreface = crlf(conf.infoPreface)\n\t\t\t.replace(/[\\uFEFF]+/g, '')\n\t\t\t.replace(/[ \\t\\xA0ã€€]+$/gm, '')\n\t\t;\n\n\t\tconf.infoPrefaceHTML = conf.infoPrefaceHTML || conf.infoPreface.replace(/\\n/g, '<br/>');\n\t}\n\n\treturn conf;\n}\n"]}